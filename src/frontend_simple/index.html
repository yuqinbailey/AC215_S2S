<!DOCTYPE html>
<html>

<head>
    <title>ðŸ”Š Silence to Sound</title>
    <!-- Add reference to Google fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- Google Material Design Styles -->
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- Add javascript package axios for accessing APIs -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
	<link rel="stylesheet" href="css/style.css">

</head>

<body style="padding: 5vh">
    <!-- Header -->
    <!-- <header class="mdc-top-app-bar" style="align-items: center;position: relative;">
        <div class="mdc-top-app-bar__row" style="max-width: 700px;">
            <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                <button class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button"
                    aria-label="Open navigation menu">menu</button>
                <span class="mdc-top-app-bar__title" style="font-weight: 900; font-size: 30px;">ðŸ”Š Silence to Sound</span>
            </section>
        </div>
    </header> -->
    <!-- Header -->

    <!-- Content -->
    <div class="image-crop-container">
		<img src="img/drum.avif" id="cropped-image">
		<h1 style="color: #F2E9E4">ðŸ”Š Silence to Sound</h1>
	</div>

    <div class="container text-center" >
		<div class="row justify-content-center" >
			<div class="col-6" id="left" style="background: #fffefe">
                <div class="mdc-card mdc-card--outlined" style="min-height: 400px;">
                    <div class="dropzone" onclick="upload_file()">
                        <input type="file" id="input_file" accept="image/*" capture="camera" name="input_file" on
                            autocomplete="off" tabindex="-1" style="display: none;">
                        <div><img id="input_file_view" style="width:100%;" /></div>
                        <div>Click to upload a video of at least 10s</div>
                    </div>
                </div>
                <div style="padding:40px;">
                    <button id="generateButton">Generate Sound</button>
                </div>
			</div>

			<div class="col-6" id="right" >
                <div class="mdc-card mdc-card--outlined" >
                    
                </div>
			</div>
		</div>
	</div>
    
    <!-- Content -->
</body>
<!-- Add Javascript -->
<!-- <script src="js/main.js"></script> -->
<script>
    // API URL
    axios.defaults.baseURL = 'http://localhost:9000/';

    // file input
    var input_file = document.getElementById("input_file");
    var input_file_view = document.getElementById('input_file_view');

    function upload_file() {
        // Clear
        //prediction_label.innerHTML = "";
        input_file_view.src = null;

        input_file.click();
    }

    function input_file_onchange() {
        // Read the uploaded file and display it
        var file_to_upload = input_file.files[0];
        input_file_view.src = URL.createObjectURL(file_to_upload);
        prediction_label.innerHTML = "";

        // Post the image to the /predict API
        var formData = new FormData();
        formData.append("file", input_file.files[0]);
        axios.post('/predict', formData, {
            headers: {
                'Content-Type': 'multipart/form-data'
            }
        }).then(function (response) {
            var prediction_results = response.data;
            console.log(prediction_results);

            // Display the results
            prediction_label.innerHTML = prediction_results["prediction_label"] + " (" + prediction_results["accuracy"] + "%)";
            if (prediction_results["poisonous"]) {
                mushroom_type.innerHTML = "&nbsp;&nbsp;Poisonous";
            } else {
                mushroom_type.innerHTML = "";
            }

        });
    }

    // Attach an onchange event
    input_file.onchange = input_file_onchange;
</script>




</html>